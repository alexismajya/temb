"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@angular-devkit/core");
const lodash_1 = require("lodash");
class JestConfigurationBuilder {
    constructor(defaultConfigResolver, customConfigResolver) {
        this.defaultConfigResolver = defaultConfigResolver;
        this.customConfigResolver = customConfigResolver;
    }
    buildConfiguration(root, sourceRoot, workspaceRoot, configPath = 'jest.config.js') {
        const configRoot = root === '' ? sourceRoot || core_1.normalize('') : root;
        const projectRoot = core_1.resolve(workspaceRoot, configRoot);
        const globalDefaultConfig = this.defaultConfigResolver.resolveGlobal(workspaceRoot);
        const projectDefaultConfig = this.defaultConfigResolver.resolveForProject(projectRoot);
        const globalCustomConfig = this.customConfigResolver.resolveGlobal(workspaceRoot);
        const projectCustomConfig = this.customConfigResolver.resolveForProject(projectRoot, configPath);
        return lodash_1.merge(globalDefaultConfig, projectDefaultConfig, globalCustomConfig, projectCustomConfig);
    }
}
exports.JestConfigurationBuilder = JestConfigurationBuilder;
//# sourceMappingURL=jest-configuration-builder.js.map